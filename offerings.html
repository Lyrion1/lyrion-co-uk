<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offerings | LYRĪON Celestial Couture</title>
    <meta name="description" content="Explore all offerings at LYRĪON - celestial apparel, homeware, and cosmic wisdom for those who live with intention.">
    <link rel="stylesheet" href="assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="assets/img/favicon.png">
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        :root {
            --color-night-blue: #0a0e1a;
            --color-cream: #f5f3ef;
            --color-ink: #151311;
            --color-gold: #d8c47a;
            --color-gold-dark: #c4a449;
            --font-serif: 'Playfair Display', serif;
        }

        /* Sacred Altar Layout */
        .page-container {
            max-width: 700px;
            margin: 8rem auto;
            padding: 0 4rem;
            text-align: center;
        }
        
        .sacred-icon {
            font-size: 3rem;
            color: var(--color-gold);
            margin-bottom: 2rem;
            opacity: 0.8;
        }
        
        .page-container h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            color: var(--color-ink);
            font-weight: 300;
        }
        
        /* Thin candle-like vertical line */
        .divider-line {
            width: 1px;
            height: 60px;
            background: linear-gradient(to bottom, transparent, var(--color-gold), transparent);
            margin: 2rem auto;
            opacity: 0.6;
        }
        
        .page-container p {
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
            color: #5a5856;
        }
        
        .poetic-text {
            font-size: 1.2rem;
            line-height: 2;
            font-style: italic;
            color: var(--color-ink);
            margin: 3rem auto;
            max-width: 600px;
            opacity: 0.9;
        }
        
        /* Translucent panel for form */
        .donation-form {
            background: linear-gradient(135deg, rgba(245, 243, 239, 0.5) 0%, rgba(252, 250, 250, 0.6) 100%);
            border: 1px solid var(--color-gold);
            padding: 3rem 2.5rem;
            border-radius: 8px;
            max-width: 450px;
            margin: 3rem auto;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(216, 196, 122, 0.15);
        }
        
        .amount-input-group {
            margin: 2rem 0;
            position: relative;
        }
        
        .amount-input-group label {
            display: block;
            margin-bottom: 1rem;
            color: var(--color-ink);
            font-size: 1.1rem;
            font-family: var(--font-serif);
            font-weight: 300;
        }
        
        .amount-input-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
        }
        
        .currency-symbol {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-gold);
            font-size: 1.5rem;
            font-family: var(--font-serif);
        }
        
        .amount-input {
            width: 100%;
            padding: 1rem 1rem 1rem 2.5rem;
            border: 1px solid var(--color-gold);
            border-radius: 6px;
            font-family: var(--font-serif);
            font-size: 1.5rem;
            text-align: center;
            background: rgba(255, 255, 255, 0.7);
            transition: all 0.3s ease;
        }
        
        .amount-input:focus {
            outline: none;
            border-color: var(--color-gold-dark);
            box-shadow: 0 0 15px rgba(216, 196, 122, 0.25);
            background: rgba(255, 255, 255, 0.9);
        }
        
        /* Light a Star button */
        .donation-btn {
            background: var(--color-gold);
            color: var(--color-ink);
            border: none;
            padding: 1.2rem 3rem;
            font-size: 1.1rem;
            font-family: var(--font-serif);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.35s ease;
            width: 100%;
            margin-top: 1.5rem;
            font-weight: 400;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(216, 196, 122, 0.2);
        }
        
        .donation-btn:hover {
            background: var(--color-gold-dark);
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(216, 196, 122, 0.35);
        }
        
        .donation-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .success-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(21, 19, 17, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        
        .success-overlay.show {
            display: flex;
        }
        
        .success-content {
            text-align: center;
            color: var(--color-gold);
            max-width: 600px;
            padding: 3rem;
        }
        
        .success-content .star {
            font-size: 5rem;
            margin-bottom: 2rem;
            animation: sparkle 2s ease-in-out infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }
        
        .success-content h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: var(--color-gold);
        }
        
        .success-content p {
            font-size: 1.3rem;
            font-style: italic;
            color: rgba(244, 239, 232, 0.9);
        }

        @media (max-width: 768px) {
            .page-container {
                padding: 0 2rem;
            }
            .page-container h1 {
                font-size: 2.5rem;
            }
            .donation-form {
                padding: 2rem;
            }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo">
            <a href="index.html">
                <img src="assets/img/lyrion-logo.png" alt="LYRĪON Celestial Couture Logo" style="height: 40px; width: auto; display: block; margin: 0 auto;">
            </a>
        </div>
        <nav class="nav-main">
            <div class="nav-item">
                <a>The Houses</a>
                <div class="dropdown-menu">
                    <a href="shop.html?category=woman">House of the Divine Feminine (Woman)</a>
                    <a href="shop.html?category=man">House of the Solar Masculine (Man)</a>
                    <a href="shop.html?category=moon-girls">House of Lunar Maidens (Moon Girls)</a>
                    <a href="shop.html?category=star-boys">House of Starborn Sons (Star Boys)</a>
                </div>
            </div>
            <a href="zodiac/index.html">The Zodiac Library</a>
            <div class="nav-item">
                <a>Ritual Market</a>
                <div class="dropdown-menu">
                    <a href="shop.html?category=home-altar">Home & Altar</a>
                    <a href="shop.html?category=sacred-textiles">Sacred Textiles</a>
                    <a href="shop.html?category=digital-rituals">Digital Rituals</a>
                </div>
            </div>
            <a href="oracle.html">The Oracle</a>
        </nav>
    </header>

    <section class="page-container">
        <div class="sacred-icon">✦</div>
        <h1>Offerings to the Celestial Hearth</h1>
        <div class="divider-line"></div>
        
        <div class="poetic-text">
            <p>In the infinite dance of stars and silence, your generosity becomes stardust—illuminating paths for those who seek cosmic wisdom. Each offering kindles the celestial flame, weaving light into the tapestry of collective awakening.</p>
        </div>
        
        <div class="donation-form">
            <form id="donation-form">
                <div class="amount-input-group">
                    <label for="amount">Choose Your Offering</label>
                    <div class="amount-input-wrapper">
                        <span class="currency-symbol">£</span>
                        <input 
                            type="number" 
                            id="amount" 
                            name="amount" 
                            class="amount-input" 
                            min="1" 
                            step="1" 
                            placeholder="0" 
                            required
                        >
                    </div>
                </div>
                
                <button type="submit" class="donation-btn">
                    Light a Star ✧
                </button>
            </form>
        </div>
    </section>
    
    <div class="success-overlay" id="success-overlay">
        <div class="success-content">
            <div class="star">✦</div>
            <h2>Your offering has lit a new star.</h2>
            <p>The celestial hearth glows brighter with your generosity. May the cosmos return this light to you a thousandfold.</p>
        </div>
    </div>
    
    <script>
        // Stripe publishable key (safe for client-side use)
        const STRIPE_PUBLISHABLE_KEY = 'pk_test_51Qh7sV00T0vZKJKn9Ye9YqLXMHzDGzCjr5pW4G05Rjt6g3nB3YP0TYsVcPZaFQNvDnU8PJ9u0pR5lqG3vB4F00vZYqLXMH';
        
        document.getElementById('donation-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const amount = parseFloat(document.getElementById('amount').value);
            if (!amount || amount < 1) {
                alert('Please enter a valid amount (minimum £1)');
                return;
            }
            
            const button = this.querySelector('button[type="submit"]');
            button.disabled = true;
            button.textContent = 'Preparing your offering...';
            
            try {
                const response = await fetch('/.netlify/functions/create-checkout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        productData: {
                            name: 'Celestial Hearth Offering',
                            price: amount,
                            id: 'DONATION'
                        }
                    })
                });
                
                const data = await response.json();
                
                if (data.sessionId) {
                    // Redirect to Stripe Checkout
                    const stripe = Stripe(STRIPE_PUBLISHABLE_KEY);
                    stripe.redirectToCheckout({ sessionId: data.sessionId });
                } else {
                    throw new Error('No session ID received');
                }
            } catch (error) {
                console.error('Donation error:', error);
                alert('Unable to process donation. Please try again later.');
                button.disabled = false;
                button.textContent = 'Light a Star ✧';
            }
        });
        
        // Check for successful donation on page load
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('donation') === 'success') {
            document.getElementById('success-overlay').classList.add('show');
            
            // Hide overlay after 5 seconds and allow clicking anywhere to close
            setTimeout(() => {
                document.getElementById('success-overlay').classList.remove('show');
            }, 5000);
            
            document.getElementById('success-overlay').addEventListener('click', function() {
                this.classList.remove('show');
            });
        }
    </script>

    <footer>
        <div class="nav-footer">
            <a href="shop.html">Collections</a>
            <a href="oracle.html">Oracle</a>
            <a href="contact.html">Contact</a>
            <a href="blog.html">Blog</a>
        </div>
        <div class="copyright">
            &copy; 2025 LYRĪON Celestial Couture. Live with Ritual and Intention.
        </div>
    </footer>
    
    <script src="js/lyrion.js"></script>
    
</body>
</html>